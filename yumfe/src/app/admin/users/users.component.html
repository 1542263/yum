<md-grid-list cols="8" rowHeight="70px" class="title">
  <md-grid-tile colspan="4" class="heading left-no-pad">
    User account settings
  </md-grid-tile>
  <md-grid-tile colspan="4" class="right-no-pad">
    <app-admin-nav></app-admin-nav>
  </md-grid-tile>
</md-grid-list>
<md-card>
  <md-grid-list cols="8" rowHeight="100px" class="divider">
    <md-grid-tile colspan="4" class="left">
      <div class="heading">
        <div>Profile details</div>
      </div>
    </md-grid-tile>
    <md-grid-tile colspan="4" class="right">
      <app-slide-toggle-component *ngIf="user" [user]="user" [externalAuth]=externalAuth (updateVersion)="handleUpdateVersion($event)"></app-slide-toggle-component>
    </md-grid-tile>
  </md-grid-list>
  <app-profile *ngIf="user" [(user)]="user" [change]="change" [admin]="true" (invalidProfileForm)="handleInvalidProfileForm($event)"
    (updateVersion)="handleUpdateVersion($event)">
  </app-profile>
  <md-grid-list cols="8" rowHeight="80px">
    <md-grid-tile colspan="4" class="left">
      <button [disabled]="user==null || !user.approved" md-raised-button color="accent" (click)="resetPwd()">Reset Password</button>
    </md-grid-tile>
    <md-grid-tile colspan="4" class="right">
      <form (ngSubmit)="updateUser(profileGroup)" [formGroup]="profileGroup" autocomplete="off">
        <button md-raised-button color="accent" type="submit" [disabled]="(profileGroup.invalid)||(!detectChanges())||showSpinner||invalid">Save changes</button>
      </form>
      <img *ngIf="showSpinner" src="../../../assets/img/spinner.gif">
    </md-grid-tile>
  </md-grid-list>
</md-card>
<md-card>
  <md-grid-list cols="8" rowHeight="100px" class="divider">
    <md-grid-tile colspan="4" class="left">
      <div class="heading">
        <div>Balance</div>
      </div>
    </md-grid-tile>
    <md-grid-tile colspan="4" class="right">
      <div class="bold" *ngIf='user != null'> {{balance | number : '1.2-2'}}<span [innerHTML]="currency | async"></span></div>
    </md-grid-tile>
  </md-grid-list>

  <div fxLayout="row" fxLayoutAlign="space-between center" class="card-pad">
    <div fxFlex="30">
      <form novalidate [formGroup]="balanceGroup" autocomplete="off">
        <md-form-field>
          <input mdInput placeholder="Amount" formControlName="amount">
          <md-error *ngIf="balanceGroup.get('amount').touched && balanceGroup.get('amount').hasError('required')">
            Amount is required
          </md-error>
          <md-error *ngIf="balanceGroup.get('amount').touched && balanceGroup.get('amount').hasError('pattern')">
            Invalid amount
          </md-error>
        </md-form-field>
      </form>
    </div>
    <div fxFlex="70">
      <button md-raised-button color="accent" type="button" (click)="updateBalance()" [disabled]="balanceGroup.invalid || showSpinnerBalance">Add to balance</button>
      <img *ngIf="showSpinnerBalance" src="../../../assets/img/spinner.gif">
    </div>
  </div>
  <div class="amount-rules">
    In case of money return, type a negative amount
  </div>
</md-card>
